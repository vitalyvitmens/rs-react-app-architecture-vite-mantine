import{r as a,h as S,u as E,j as s,L as k}from"./index-C8tkmUjg.js";import{C as v,B as N}from"./BtnMantine-CFUNcb14.js";import{NotFoundMantine as C}from"./NotFoundMantine-Ldg1of9Z.js";import{a as w}from"./axios-Bo0ATomq.js";import"./Button-HoubDkts.js";function L(){const[i,p]=a.useState(!0),[e,r]=a.useState(!1),[h,l]=a.useState([]),{category:x}=S();return a.useEffect(()=>{l([])},[x]),a.useLayoutEffect(()=>{p(!0),r(!1);const c=async n=>{try{const t=await w.get(n);l(m=>[...new Set([...m,...t.data.results])]),t.data.info.next&&await c(t.data.info.next)}catch(t){r(!0),console.error(t)}};c("https://rickandmortyapi.com/api/episode").then(()=>{p(!1)}).catch(n=>{r(!0),console.error(n)})},[x]),{loading:i,error:e,episodes:h}}function A(){const[i,p]=a.useState(!0),[e,r]=a.useState(!1),[h,l]=a.useState([]),{category:x}=S();return a.useEffect(()=>{l([])},[x]),a.useLayoutEffect(()=>{p(!0),r(!1);const c=async n=>{try{const t=await w.get(n);l(m=>[...new Set([...m,...t.data.results])]),t.data.info.next&&await c(t.data.info.next)}catch(t){r(!0),console.error(t)}};c("https://rickandmortyapi.com/api/character").then(()=>{p(!1)}).catch(n=>{r(!0),console.error(n)})},[x]),{loading:i,error:e,characters:h}}function $(i,p){const[e,r]=a.useState(!0),[h,l]=a.useState(!1),[x,c]=a.useState({}),{category:n,id:t}=S(),[m,g]=a.useState(n==null?void 0:n.slice(0,-1));return a.useEffect(()=>{c({}),g(n==null?void 0:n.slice(0,-1))},[n,i]),a.useLayoutEffect(()=>{r(!0),l(!1);let f;return w({method:"GET",url:`https://rickandmortyapi.com/api/${m}/${t}`,params:{q:i,page:p},cancelToken:new w.CancelToken(j=>f=j)}).then(j=>{c(j.data),r(!1)}).catch(j=>{w.isCancel(j)}),()=>f()},[n,m,t,p,i]),{loading:e,error:h,categoriesId:x,category:n}}const D="_Detail_1epgl_1",F="_row_1epgl_9",T="_name_1epgl_33",P="_column_1epgl_65",z="_body_1epgl_73",u={Detail:D,row:F,name:T,column:P,body:z},Y=()=>{var n,t,m,g,f,j,_,b;const{loading:i,error:p,categoriesId:e,category:r}=$(),{episodes:h}=L(),{characters:l}=A(),x=E();if(i||!e)return s.jsx("h2",{children:"Loading..."});if(!e&&!i)return s.jsx(C,{});const c={width:"40px",height:"40px",margin:"1px 20px 1px 10px",transform:"translateY(15px)",border:"1px solid #084949",borderRadius:"50%",boxShadow:"-4px -2px 10px black"};return s.jsxs("div",{className:u.Detail,children:[!e||i?s.jsx("span",{children:"Загрузка..."}):s.jsxs("div",{className:u.row,children:[(e==null?void 0:e.image)&&s.jsx("img",{src:e.image,alt:e.name}),s.jsxs("div",{className:u.column,children:[s.jsx("div",{className:u.name,children:e.name||"🤷"}),s.jsxs("div",{className:u.body,children:[r==="characters"&&s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("span",{children:"Пол: "}),e.gender==="unknown"?"🤷":e.gender||"🤷"]}),s.jsxs("p",{children:[s.jsx("span",{children:"Вид: "}),e.species==="unknown"?"🤷":e.species||"🤷"]}),s.jsxs("p",{children:[s.jsx("span",{children:"Статус: "}),e.status==="unknown"?"🤷":e.status||"🤷"]}),s.jsxs("p",{children:[s.jsx("span",{children:"Тип: "}),e.type==="unknown"?"🤷":e.type||"🤷"]}),s.jsxs("p",{style:{fontSize:"1.5rem"},children:[s.jsx("span",{className:u.name,children:"Расположение: "}),((n=e==null?void 0:e.location)==null?void 0:n.name)==="unknown"?"🤷":s.jsx(k,{to:`/locations${(t=e==null?void 0:e.location)==null?void 0:t.url.slice(40)}`,children:(m=e==null?void 0:e.location)==null?void 0:m.name})||"🤷"]})]},e.id),r==="locations"&&s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("span",{children:"Тип: "}),e.type==="unknown"?"🤷":e.type||"🤷"]}),s.jsxs("p",{children:[s.jsx("span",{children:"Измерение: "}),e.dimension==="unknown"?"🤷":e.dimension||"🤷"]}),s.jsx("span",{className:u.name,children:"Список жителей: "}),s.jsx("ol",{children:((g=e==null?void 0:e.residents)==null?void 0:g.length)===0?s.jsx("span",{style:{color:"red"},children:"Список жителей отсутствует!"}):Array.isArray(e==null?void 0:e.residents)&&((f=e==null?void 0:e.residents)==null?void 0:f.map(d=>d&&(l==null?void 0:l.map((o,y)=>o.id===Number(d.slice(42))&&s.jsx("li",{children:s.jsxs(k,{to:`/characters/${d.slice(42)}`,children:[s.jsx("img",{style:c,src:o.image,alt:o.name}),o.name]})},y)))))})]}),r==="episodes"&&s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("span",{children:"Номер эпизода: "}),e.episode==="unknown"?"🤷":e.episode||"🤷"]}),s.jsxs("p",{children:[s.jsx("span",{children:"Дата выхода: "}),e.air_date==="unknown"?"🤷":e.air_date||"🤷"]}),s.jsx("span",{className:u.name,children:"Список персонажей: "}),s.jsx("ol",{children:((j=e==null?void 0:e.characters)==null?void 0:j.length)===0?s.jsx("span",{style:{color:"red"},children:"Список персонажей отсутствует!"}):Array.isArray(e==null?void 0:e.characters)&&((_=e==null?void 0:e.characters)==null?void 0:_.map(d=>d&&(l==null?void 0:l.map((o,y)=>o.id===Number(d.slice(42))&&s.jsx("li",{children:s.jsxs(k,{to:`/characters/${d.slice(42)}`,children:[s.jsx("img",{style:c,src:o.image,alt:o.name}),o.name]})},y)))))})]}),p&&s.jsx("div",{children:"Error"})]})]})]}),r==="characters"&&s.jsxs("div",{style:{color:"#161bb6",marginTop:"-2rem",marginLeft:"1.5rem",fontSize:"1.2rem",fontWeight:"600",textAlign:"start",textShadow:"-1px 1px 1px black"},children:[s.jsx("span",{className:u.name,children:"Список эпизодов: "}),s.jsx("ol",{children:((b=e==null?void 0:e.episode)==null?void 0:b.length)===0?s.jsx("span",{style:{color:"red"},children:"Список эпизодов отсутствует!"}):Array.isArray(e==null?void 0:e.episode)&&(e==null?void 0:e.episode.map(d=>d&&(h==null?void 0:h.map((o,y)=>o.id===Number(d.slice(40))&&s.jsx("li",{children:s.jsxs(k,{to:`/episodes/${d.slice(40)}`,children:[o.episode," ",o.name]})},y)))))})]}),s.jsx(v,{component:N,style:{border:"1px solid black",display:"flex",margin:"auto"},title:"Вернуться назад к списку",variant:"gradient",gradient:{from:"red",to:"violet",deg:64},onClick:()=>x(-1)})]})};export{Y as Detail};
